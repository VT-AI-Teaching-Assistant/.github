# VT AI Lecture Assistant - Complete System Documentation

> **Generated:** December 6, 2025  
> **System Age:** ~3 months of active development  
> **Total Services:** 5 + 1 SQL-DB Schema Directory

---

## Table of Contents

1. [System Overview](#1-system-overview)
2. [Repository / Service Breakdown](#2-repository--service-breakdown)
3. [Component Interaction & Communication](#3-component-interaction--communication)
4. [Features Breakdown](#4-features-breakdown)
5. [Security Model](#5-security-model)
6. [System Architecture](#6-system-architecture)
7. [Project History & Metrics](#7-project-history--metrics)
8. [Bottlenecks, Risks & Improvements](#8-bottlenecks-risks--improvements)
9. [Glossary](#9-glossary)

---

# ğŸ“Œ 1. System Overview

## 1.1 What the System Does

The **VT AI Lecture Assistant** is an intelligent educational platform designed for Virginia Tech (VT) that serves as an AI-powered Teaching Assistant for university courses. The system integrates with **Canvas LMS** to provide:

- **AI-powered Question & Answer (QA)** - Students can ask questions about course materials and receive contextually relevant answers generated by AWS Bedrock AI models
- **Lecture Notes Generation** - Automatic generation of structured notes from lecture transcripts using Claude AI
- **Content Vectorization** - Course materials (notes, syllabus, assignments, announcements, modules) are converted into vector embeddings for semantic search
- **Grade Retrieval** - Students and instructors can query grades from Canvas LMS
- **Analytics Dashboard** - Instructors can view QA usage statistics and student engagement metrics
- **Dispute Resolution** - Students can dispute AI-generated answers, with instructor resolution workflow

## 1.2 Business Purpose

Based on code analysis, the system serves:

| User Type | Primary Use Cases |
|-----------|-------------------|
| **Students** | Ask course-related questions, view grades, access lecture notes, browse transcripts, dispute incorrect AI answers |
| **Instructors** | Register courses from Canvas, upload transcripts, view QA analytics, resolve disputes, manage course content |
| **System** | Auto-sync content from Canvas, generate notes, vectorize content, power semantic search |

## 1.3 Overall Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              USER LAYER                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚             VT-AI-Lecture-Assistant-Frontend (React)                 â”‚    â”‚
â”‚  â”‚                 - React 18 + TypeScript                              â”‚    â”‚
â”‚  â”‚                 - Tailwind CSS + Heroicons                          â”‚    â”‚
â”‚  â”‚                 - Inversify DI Container                            â”‚    â”‚
â”‚  â”‚                 - Axios HTTP Client                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ REST API (HTTP/HTTPS)
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           API GATEWAY LAYER                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         VT-AI-Lecture-Assistant-Backend_Java (Spring Boot)          â”‚    â”‚
â”‚  â”‚                 - Spring Boot 3.2 + Java 17                         â”‚    â”‚
â”‚  â”‚                 - Spring Security + JWT Auth                        â”‚    â”‚
â”‚  â”‚                 - Spring Data JPA (Hibernate)                       â”‚    â”‚
â”‚  â”‚                 - AWS SNS Client                                    â”‚    â”‚
â”‚  â”‚                 - Canvas LMS API Integration                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                     â”‚                              â”‚
          â”‚ HTTP               â”‚ SNS                          â”‚ HTTP
          â–¼                     â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  flask-qa-serviceâ”‚  â”‚     AWS SNS      â”‚  â”‚       Canvas LMS API         â”‚
â”‚     (Python)     â”‚  â”‚  (FIFO Topics)   â”‚  â”‚     (External Service)       â”‚
â”‚ - Flask 3.0      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - AWS Bedrock    â”‚           â”‚
â”‚ - S3 Vectors     â”‚           â”‚ SNS â†’ SQS Fan-out
â”‚ - Grade Tools    â”‚           â–¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚                  AWS SQS Queues                     â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚                        â”‚
                              â–¼                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ notes-generation-     â”‚  â”‚ vectorization-worker-dev-py     â”‚
              â”‚ worker (Node.js)      â”‚  â”‚         (Python)                â”‚
              â”‚ - AWS Lambda          â”‚  â”‚ - AWS Lambda                    â”‚
              â”‚ - Bedrock Claude 3    â”‚  â”‚ - Bedrock Titan Embed           â”‚
              â”‚ - PostgreSQL Client   â”‚  â”‚ - S3 Vectors                    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - PDF/DOCX Parsing              â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚                        â”‚
                              â–¼                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                    DATA LAYER                                â”‚
              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
              â”‚  â”‚   PostgreSQL RDS   â”‚  â”‚   AWS S3 Vectors (US-EAST-2)  â”‚  â”‚
              â”‚  â”‚   (ai_ta_db)       â”‚  â”‚   - Vector Embeddings         â”‚  â”‚
              â”‚  â”‚   - 18 Tables      â”‚  â”‚   - Course-indexed Storage    â”‚  â”‚
              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 1.4 Architectural Style

The system employs a **Hybrid Microservices + Event-Driven Architecture**:

| Pattern | Where Applied |
|---------|---------------|
| **Microservices** | Separate services for user management (Java), QA (Python), notes generation (Node.js), vectorization (Python) |
| **Event-Driven** | SNS â†’ SQS fan-out pattern for async processing (notes generation, vectorization) |
| **API Gateway** | Java backend acts as gateway, proxying requests and orchestrating workflows |
| **CQRS-like** | Writes go to PostgreSQL; reads for QA use S3 Vectors (semantic search) |

## 1.5 Major Components and Responsibilities

| Component | Responsibility |
|-----------|----------------|
| **VT-AI-Lecture-Assistant-Frontend** | User interface, authentication flow, course management UI, chat interface |
| **VT-AI-Lecture-Assistant-Backend_Java** | Authentication, authorization, Canvas API proxy, course/user management, SNS event publishing |
| **flask-qa-service** | AI-powered QA processing, vector search, tool execution (grades, TA notification) |
| **notes-generation-worker** | Transcript â†’ Structured Notes using Bedrock Claude 3 |
| **vectorization-worker-dev-py** | Text chunking, embedding generation, vector storage for semantic search |
| **SQL-DB** | Schema documentation (PostgreSQL RDS) |

---

# ğŸ“Œ 2. Repository / Service Breakdown

## 2.1 VT-AI-Lecture-Assistant-Backend_Java

### Purpose & Responsibility
The Java backend is the **central API gateway** that handles:
- User authentication and session management
- Canvas LMS API integration (courses, enrollments, grades, modules)
- Course registration and context management
- Transcript upload and management
- SNS event publishing for async workflows
- QA request proxying to Flask service

### Tech Stack

| Category | Technology |
|----------|------------|
| **Language** | Java 17 |
| **Framework** | Spring Boot 3.2.0 |
| **Security** | Spring Security, JWT (jjwt 0.12.3) |
| **Database** | Spring Data JPA, Hibernate, PostgreSQL |
| **Build** | Maven |
| **AWS** | AWS SDK SNS 2.20.26 |
| **Utilities** | Lombok, Apache Commons Lang3 |

### Runtime Dependencies

| Dependency | Purpose |
|------------|---------|
| PostgreSQL RDS | Primary data storage |
| Canvas LMS API | External LMS integration |
| AWS SNS | Event publishing for async workers |
| Flask QA Service | AI-powered question answering |
| SMTP (Gmail) | Email notifications for disputes |

### Required Environment Variables

```properties
# Database
DB_USER, DB_PASSWORD

# JWT
JWT_SECRET (min 32 chars for HS256)

# Canvas LMS
CANVAS_DOMAIN, CANVAS_CLIENT_ID, CANVAS_CLIENT_SECRET
CANVAS_INSTRUCTOR_ACCESS_TOKEN, CANVAS_STUDENT_ACCESS_TOKEN

# AWS
AWS_REGION, AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY
AWS_SNS_TOPIC_ARN, AWS_SNS_VECTORIZATION_TOPIC_ARN

# QA Service
QA_SERVICE_URL

# Email
SMTP_SERVER, SMTP_PORT, SMTP_USERNAME, SMTP_PASSWORD
FROM_EMAIL, TA_EMAIL

# Development Auth
FAKE_INSTRUCTOR_EMAIL, FAKE_INSTRUCTOR_PASSWORD
FAKE_STUDENT_EMAIL, FAKE_STUDENT_PASSWORD
```

### Folder Structure

```
src/main/java/com/vt/ailecture/
â”œâ”€â”€ config/                    # Spring configuration classes
â”‚   â”œâ”€â”€ CacheConfig.java       # In-memory caching for Canvas API
â”‚   â”œâ”€â”€ DatabaseConfig.java    # JPA/Hibernate configuration
â”‚   â””â”€â”€ SecurityConfig.java    # Spring Security & JWT filter chain
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ ClientController.java  # Main REST API (~1500 lines, 50+ endpoints)
â”‚   â””â”€â”€ AdminController.java   # Admin endpoints (cache, sessions)
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ canvas/               # Canvas API response DTOs (13 files)
â”‚   â”œâ”€â”€ request/              # API request DTOs (8 files)
â”‚   â””â”€â”€ response/             # API response DTOs (9 files)
â”œâ”€â”€ entity/                   # JPA entities (15 files)
â”œâ”€â”€ exception/                # Custom exception handlers
â”œâ”€â”€ repository/               # Spring Data JPA repositories (14 files)
â”œâ”€â”€ security/                 # JWT authentication (3 files)
â”œâ”€â”€ service/                  # Business logic (16 services)
â””â”€â”€ VtAiLectureApplication.java  # Main application entry
```

### Key Services

| Service | Purpose |
|---------|---------|
| `AuthService` | Login/logout, JWT generation, session management with token rotation |
| `CanvasService` | Canvas LMS API client with caching (users, courses, enrollments, grades) |
| `CourseService` | Course registration, student management |
| `TranscriptService` | Transcript upload, notes retrieval |
| `QaService` | Proxy to Flask QA service |
| `SnsService` | Event publishing for async workers |
| `QaDisputeService` | Dispute management and resolution |
| `EmailService` | Gmail SMTP email notifications |
| `GradeService` | Grade retrieval from Canvas |
| `QaLogService` | Analytics and logging |

### APIs Exposed

**Authentication:**
- `POST /api/auth/login` - Login with email/password
- `POST /api/auth/refresh` - Refresh access token
- `POST /api/auth/logout` - Logout and invalidate session
- `GET /api/auth/me` - Get current user info

**User Profile:**
- `GET /api/user/profile` - Comprehensive profile with Canvas data

**Course Management:**
- `POST /api/courses/register` - Register Canvas courses (instructor)
- `GET /api/courses/{id}/students` - Get course students (instructor)
- `POST /api/courses/context` - Set active course context
- `GET /api/courses/context` - Get current context
- `GET /api/courses/{id}/announcements` - Get announcements
- `GET /api/courses/{id}/modules` - Get modules
- `GET /api/courses/{id}/grades` - Get student grades

**Transcripts & Notes:**
- `POST /api/transcripts` - Upload transcript
- `GET /api/transcripts/course/{id}` - Get course transcripts
- `GET /api/notes/{id}` - Get notes by transcript

**QA System:**
- `POST /api/qa/ask` - Ask a question
- `GET /api/qa/history` - Student's question history
- `GET /api/analytics/qa` - QA analytics (instructor)
- `POST /api/qa/dispute` - Submit dispute (student)
- `GET /api/disputes` - Get disputes (instructor)
- `POST /api/disputes/resolve` - Resolve dispute (instructor)

**Health:**
- `GET /api/health` - Service health check

### Startup Behavior
1. Spring Boot application starts on port **3167**
2. Database connection pool initialized (PostgreSQL RDS)
3. AWS SNS client initialized with credentials
4. Canvas token loaded from environment
5. Security filter chain configured (JWT authentication)
6. Cache manager initialized for Canvas API responses
7. Scheduled tasks started (session cleanup, QA log cleanup)

### Logging Pattern
- SLF4J with Logback
- Log levels: DEBUG for development, INFO for production
- Request/response logging at controller level
- Canvas API calls logged with URLs

### Error Handling
- Global exception handler (`GlobalExceptionHandler`)
- Custom exceptions: `ResourceNotFoundException`, `UnauthorizedException`
- Standardized `ApiResponse<T>` wrapper with success/error messages

---

## 2.2 VT-AI-Lecture-Assistant-Frontend

### Purpose & Responsibility
A **React single-page application (SPA)** providing the user interface for:
- Student and instructor authentication
- Course selection and context management
- AI-powered chat interface for QA
- Lecture browsing and notes viewing
- Grade viewing
- Analytics dashboard (instructors)
- Dispute submission and resolution

### Tech Stack

| Category | Technology |
|----------|------------|
| **Language** | TypeScript 4.9.5 |
| **Framework** | React 18.2.0 |
| **Routing** | React Router DOM 6.8.1 |
| **HTTP Client** | Axios 1.6.0 |
| **Dependency Injection** | Inversify 6.0.1 |
| **Styling** | Tailwind CSS 3.4.17 |
| **Icons** | Heroicons 2.0.16, Lucide React 0.553.0 |
| **Charts** | Recharts 3.5.0 |
| **Build** | Create React App (react-scripts 5.0.1) |

### Required Environment Variables

```
REACT_APP_API_BASE_URL=http://localhost:3167/api
REACT_APP_API_TIMEOUT=10000
```

### Folder Structure

```
src/
â”œâ”€â”€ api/                     # API service modules
â”‚   â”œâ”€â”€ analytics.ts         # Analytics API calls
â”‚   â”œâ”€â”€ qa.ts               # QA API calls
â”‚   â””â”€â”€ transcripts.ts      # Transcript API calls
â”œâ”€â”€ components/             # Reusable UI components
â”‚   â”œâ”€â”€ CourseContextSelection.tsx
â”‚   â”œâ”€â”€ CourseRegistration.tsx
â”‚   â”œâ”€â”€ Layout.tsx          # Main layout with navigation
â”‚   â”œâ”€â”€ ProtectedRoute.tsx  # Auth guard for routes
â”‚   â””â”€â”€ Students.tsx
â”œâ”€â”€ context/                # React Context providers
â”‚   â”œâ”€â”€ AuthContext.tsx     # Authentication state
â”‚   â”œâ”€â”€ CourseContext.tsx   # Selected course state
â”‚   â”œâ”€â”€ CourseSelectionContext.tsx
â”‚   â””â”€â”€ UserProfileContext.tsx
â”œâ”€â”€ pages/                  # Page components (14 pages)
â”‚   â”œâ”€â”€ Analytics.tsx       # QA analytics dashboard
â”‚   â”œâ”€â”€ Chat.tsx           # AI chat interface
â”‚   â”œâ”€â”€ Disputes.tsx       # Dispute management
â”‚   â”œâ”€â”€ Grades.tsx         # Grade viewing
â”‚   â”œâ”€â”€ History.tsx        # Question history
â”‚   â”œâ”€â”€ Home.tsx           # Dashboard home
â”‚   â”œâ”€â”€ InstructorUpload.tsx # Transcript upload
â”‚   â”œâ”€â”€ Landing.tsx        # Public landing page
â”‚   â”œâ”€â”€ Lectures.tsx       # Lecture list
â”‚   â”œâ”€â”€ LectureNotes.tsx   # Notes viewer
â”‚   â”œâ”€â”€ Login.tsx          # Login form
â”‚   â”œâ”€â”€ Profile.tsx        # User profile
â”‚   â””â”€â”€ StudentQuestionsDetail.tsx
â”œâ”€â”€ services/
â”‚   â””â”€â”€ ApiService.ts       # Axios wrapper with interceptors
â”œâ”€â”€ repositories/           # Data access layer
â”‚   â”œâ”€â”€ implementations.ts
â”‚   â””â”€â”€ interfaces.ts
â”œâ”€â”€ presenters/            # MVP presenters
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ models/
â”‚   â””â”€â”€ index.ts           # TypeScript interfaces
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ errorHandling.tsx  # Error boundary
â”‚   â””â”€â”€ markdownFormatter.tsx # AI response formatting
â”œâ”€â”€ container.ts           # Inversify DI container
â”œâ”€â”€ presenterBindings.ts   # Presenter bindings
â”œâ”€â”€ App.tsx               # Main application component
â”œâ”€â”€ index.tsx             # Application entry point
â”œâ”€â”€ index.css             # Global styles + Tailwind
â””â”€â”€ types.ts              # Global type definitions
```

### Key Features by Page

| Page | Functionality | Access |
|------|--------------|--------|
| `Landing` | Public landing page | Public |
| `Login` | Email/password authentication | Public |
| `Home` | Dashboard with course selection | Authenticated |
| `Chat` | AI-powered QA chat interface | Authenticated |
| `Lectures` | List of course transcripts | Authenticated |
| `LectureNotes` | View generated notes | Authenticated |
| `Grades` | View Canvas grades | Authenticated |
| `History` | Student's question history | Student only |
| `Analytics` | QA usage statistics | Instructor only |
| `Disputes` | Dispute management | Instructor only |
| `InstructorUpload` | Upload transcripts | Instructor only |
| `Profile` | User profile & course registration | Authenticated |

### Authentication Flow
1. User enters credentials â†’ `POST /api/auth/login`
2. Receive access token (stored in memory) + refresh token (HTTP-only cookie)
3. API requests include `Authorization: Bearer <token>`
4. On 401, automatic token refresh using cookie
5. Token rotation on each refresh

### State Management
- **React Context** for global state (Auth, Course, Profile)
- **Local state** for component-specific data
- **localStorage** for minimal persistence (user ID for session restore)

---

## 2.3 flask-qa-service

### Purpose & Responsibility
The **AI-powered Question Answering service** that:
- Processes natural language questions
- Performs semantic search using vector embeddings
- Generates answers using AWS Bedrock (Claude/Llama)
- Executes tools (grade lookup, TA notification)
- Supports role-based tool access

### Tech Stack

| Category | Technology |
|----------|------------|
| **Language** | Python 3.10 |
| **Framework** | Flask 3.0.0 |
| **AWS** | Boto3 1.40.57, Bedrock Runtime, S3 Vectors |
| **Validation** | Pydantic 2.5.0 |
| **Auth** | PyJWT 2.8.0 |
| **HTTP** | Requests 2.31.0 |
| **Server** | Gunicorn 21.2.0 |
| **Logging** | Structlog 23.2.0 |

### Required Environment Variables

```bash
# AWS Configuration
AWS_REGION, BEDROCK_REGION, S3VECTORS_REGION
VECTOR_BUCKET          # S3 Vectors bucket name
INDEX_NAME             # Vector index base name

# Model Configuration
EMBED_MODEL=amazon.titan-embed-text-v2:0
TEXT_MODEL=anthropic.claude-3-5-sonnet-20241022-v2:0
TOP_K=6
MAX_TOKENS=400

# Authentication
JWT_SECRET             # Shared with Java backend
REQUIRE_AUTH=true

# Grade API
GRADE_API_URL          # Java backend URL
ENABLE_GRADE_TOOL=true
ENABLE_INSTRUCTOR_GRADE_TOOL=true

# Email (for TA notifications)
SMTP_SERVER, SMTP_PORT, SMTP_USERNAME, SMTP_PASSWORD
FROM_EMAIL, TA_EMAIL
ENABLE_TA_EMAIL_NOTIFICATION=true
```

### Folder Structure

```
flask-qa-service/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py        # Flask app factory
â”‚   â”œâ”€â”€ auth.py            # JWT authentication decorator
â”‚   â”œâ”€â”€ email_service.py   # Email sending for TA notifications
â”‚   â”œâ”€â”€ prompts.py         # LLM system prompts
â”‚   â”œâ”€â”€ routes.py          # API endpoints
â”‚   â”œâ”€â”€ services.py        # QAService - core QA logic (~1050 lines)
â”‚   â””â”€â”€ tools/             # LLM function calling tools
â”‚       â”œâ”€â”€ __init__.py    # Tool registry
â”‚       â”œâ”€â”€ grade_tool.py  # Student grade lookup
â”‚       â”œâ”€â”€ instructor_grade_tool.py
â”‚       â”œâ”€â”€ roster_tool.py # Course roster lookup
â”‚       â””â”€â”€ ta_notification_tool.py
â”œâ”€â”€ app.py                 # Flask app entry
â”œâ”€â”€ config.py              # Configuration management
â”œâ”€â”€ models.py              # Pydantic models
â”œâ”€â”€ requirements.txt
â””â”€â”€ run.py                 # Development server
```

### API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/health` | Health check |
| `GET` | `/models` | List available Bedrock models |
| `POST` | `/ask` | Process QA question |
| `GET` | `/ask` | Process QA question (query params) |

### Core QA Flow

1. **Authenticate** - Validate JWT token from Java backend
2. **Embed Query** - Generate vector embedding using Titan Embed
3. **Vector Search** - Query S3 Vectors for relevant chunks
4. **Route Context** - Identify most relevant notes/syllabus/assignments
5. **Check Tools** - Determine if LLM needs tool calling
6. **Generate Answer** - Use Claude/Llama to synthesize answer
7. **Execute Tools** - If needed (grades, TA notification)
8. **Return Response** - Formatted answer with metadata

### LLM Tools

| Tool | Availability | Purpose |
|------|--------------|---------|
| `get_student_grade` | Students | Retrieve grades for authenticated student |
| `get_student_roster` | Instructors | Get course roster |
| `get_student_grade_by_id` | Instructors | Get grades for specific student |
| `notify_ta` | All | Send TA email when AI can't answer |

---

## 2.4 vectorization-worker-dev-py

### Purpose & Responsibility
An **AWS Lambda function** that:
- Processes SQS events for content vectorization
- Extracts text from various sources (notes, syllabus, assignments, announcements, modules)
- Chunks text with overlap for semantic coherence
- Generates embeddings using AWS Bedrock
- Stores vectors in S3 Vectors

### Tech Stack

| Category | Technology |
|----------|------------|
| **Language** | Python 3.10 |
| **Runtime** | AWS Lambda |
| **AWS** | Boto3 (Bedrock, S3 Vectors), psycopg2 |
| **Text Processing** | BeautifulSoup4, pdfplumber, python-docx |
| **Build** | Docker, SAM CLI |

### Required Environment Variables

```bash
DATABASE_URL              # PostgreSQL connection string
S3_VECTOR_STORE_BUCKET_ARN
INDEX_NAME                # Base index name
INDEX_BY_COURSE=true      # Course-specific indices
EMBED_MODEL=amazon.titan-embed-text-v1
AWS_REGION=us-east-1

# Text chunking
NOTES_WORDS=300           # Words per chunk
NOTES_OVERLAP=40          # Overlap words

# Canvas API (for module processing)
CANVAS_DOMAIN
CANVAS_INSTRUCTOR_TOKEN
CANVAS_COURSE_ID
```

### Event Types Handled

| Type | Payload | Processing |
|------|---------|------------|
| `notes` | `{type: "notes", id: 123}` | Fetch note text, chunk, embed, store |
| `syllabus` | `{type: "syllabus", id: 123}` | Parse HTML, chunk, embed, store |
| `assignment` | `{type: "assignment", id: 123}` | Parse description, add due date, embed |
| `announcement` | `{type: "announcement", id: 123}` | Parse HTML content, embed |
| `modules` | `{type: "modules", courseId: 1, moduleIds: [...]}` | Fetch from Canvas, extract Files/Pages |
| `pages` | `{type: "pages", courseId: 1, pageIds: [...]}` | Fetch page content, parse HTML |

### File Format Support

- **PDF** - pdfplumber extraction
- **DOCX** - python-docx parsing
- **HTML** - BeautifulSoup text extraction
- **Plain text** - Direct processing

### Vector Storage

Vectors stored with metadata:
```json
{
  "key": "course_1_note_123_chunk_0",
  "data": {"float32": [...]},
  "metadata": {
    "source": "notes|syllabus|assignment|announcement|module|page",
    "course_id": "1",
    "note_id": "123",
    "chunk_index": "0",
    "chunk_text": "...",
    "model": "amazon.titan-embed-text-v1",
    "timestamp": "2024-12-06T..."
  }
}
```

---

## 2.5 notes-generation-worker

### Purpose & Responsibility
An **AWS Lambda function** that:
- Consumes transcript events from SQS
- Generates structured lecture notes using Claude 3 Sonnet
- Saves notes to PostgreSQL database
- Triggers vectorization for generated notes

### Tech Stack

| Category | Technology |
|----------|------------|
| **Language** | JavaScript (Node.js 20+, ES Modules) |
| **Runtime** | AWS Lambda |
| **AWS** | @aws-sdk/client-bedrock-runtime, @aws-sdk/client-sns |
| **Database** | pg (PostgreSQL client) |
| **Validation** | Zod 4.1.12 |

### Required Environment Variables

```bash
DATABASE_URL              # PostgreSQL connection string
BEDROCK_REGION=us-east-1
BEDROCK_MODEL_ID=anthropic.claude-3-sonnet-20240229-v1:0
SNS_TOPIC_ARN             # For vectorization events
```

### Folder Structure

```
notes-generation-worker/
â”œâ”€â”€ bedrock/
â”‚   â””â”€â”€ client.js         # Bedrock client wrapper
â”œâ”€â”€ db/
â”‚   â””â”€â”€ client.js         # PostgreSQL client
â”œâ”€â”€ sns/
â”‚   â””â”€â”€ client.js         # SNS publisher
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ env.js            # Environment configuration
â”œâ”€â”€ types.js              # Type definitions
â”œâ”€â”€ index.js              # Lambda handler (~137 lines)
â””â”€â”€ package.json
```

### Processing Flow

1. Receive SQS event with transcript ID
2. Check if notes already exist (idempotency)
3. Fetch transcript from database
4. Generate notes using Bedrock Claude 3
5. Save notes to `notes` table
6. Publish SNS event to trigger vectorization

---

## 2.6 SQL-DB Directory

### Purpose
Contains **JSON schema documentation** for the PostgreSQL database (hosted on AWS RDS).

### Files

| File | Content |
|------|---------|
| `Table_Schema.json` | All column definitions (table, column, type, nullable, default) |
| `PrimaryKey_Data.json` | Primary key mappings for each table |
| `ForeignKey_Data.json` | Foreign key relationships |

### Database Schema

#### Tables (18 total)

| Table | Purpose | Primary Key |
|-------|---------|-------------|
| `students` | Student records | `student_id` (serial) |
| `instructors` | Instructor records | `instructor_id` (serial) |
| `courses` | Course definitions | `course_id` (serial) |
| `enrollments` | Student-course enrollments | `enrollment_id` (serial) |
| `transcripts` | Lecture transcripts | `transcript_id` (serial) |
| `notes` | Generated lecture notes | `note_id` (serial) |
| `syllabus` | Course syllabi | `syllabus_id` (serial) |
| `assignments` | Canvas assignments | `assignment_id` (bigint) |
| `assignment_rubrics` | Assignment rubric criteria | `rubric_id` (serial) |
| `announcements` | Course announcements | `announcement_id` (serial) |
| `posts` | Instructor posts | `post_id` (serial) |
| `course_files` | Uploaded files | `file_id` (serial) |
| `course_context` | Active course selection | `context_id` (serial) |
| `external_mappings` | Canvas ID mappings | `mapping_id` (serial) |
| `canvas_tokens` | OAuth tokens | `token_id` (serial) |
| `user_sessions` | Auth sessions | `session_id` (varchar) |
| `qa_logs` | QA question/answer logs | `log_id` (serial) |
| `qa_disputes` | QA dispute records | `dispute_id` (serial) |

#### Key Relationships

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ instructors â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ 1:N
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                 â”‚                 â”‚
         â–¼                 â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ courses â”‚â—„â”€â”€â”€â”€â–ºâ”‚transcriptsâ”‚    â”‚ qa_logs     â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                 â”‚                 â”‚
         â”‚ 1:N             â”‚ 1:1             â”‚ 1:1
         â–¼                 â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚enrollmentsâ”‚    â”‚   notes   â”‚    â”‚ qa_disputes â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ N:1
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ students â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Service-Table Dependencies

| Service | Tables Used |
|---------|-------------|
| Backend Java | All tables (primary data access) |
| flask-qa-service | None directly (uses Backend API for grades) |
| vectorization-worker | `notes`, `syllabus`, `assignments`, `announcements` |
| notes-generation-worker | `transcripts`, `notes` |

---

# ğŸ“Œ 3. Component Interaction & Communication

## 3.1 Service Communication Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     HTTP/REST      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Java Backend   â”‚
â”‚   (React)    â”‚   JSON over HTTPS  â”‚  (Spring Boot)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                        â”‚                        â”‚
                    â–¼                        â–¼                        â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Flask QA       â”‚      â”‚   Canvas LMS    â”‚      â”‚   PostgreSQL  â”‚
           â”‚ Service        â”‚      â”‚   (External)    â”‚      â”‚   (RDS)       â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                        â”‚                        â”‚
                    â–¼                        â–¼                        â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   AWS Bedrock  â”‚      â”‚   AWS S3        â”‚      â”‚   AWS SNS     â”‚
           â”‚ (Claude/Titan) â”‚      â”‚   Vectors       â”‚      â”‚  (FIFO Topic) â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                    â”‚
                                                           SNS â†’ SQS Fan-out
                                                                    â”‚
                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚                                                â”‚
                                           â–¼                                                â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚ Notes Generation â”‚                           â”‚ Vectorization    â”‚
                                  â”‚ Worker (Lambda)  â”‚                           â”‚ Worker (Lambda)  â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3.2 API Calls Between Services

### Frontend â†’ Java Backend

| Flow | Request | Response |
|------|---------|----------|
| Login | `POST /api/auth/login {email, password}` | `{accessToken, user}` |
| Get Profile | `GET /api/user/profile` | `{user, canvasEnrollments, registeredCourses}` |
| Ask Question | `POST /api/qa/ask {question, courseId}` | `{answer, model_used}` |
| Get Grades | `GET /api/courses/{id}/students/{id}/grades` | `[{assignment, score, grade}]` |

### Java Backend â†’ Flask QA Service

| Endpoint | Purpose |
|----------|---------|
| `POST /ask` | Forward QA request with JWT |

Request:
```json
{
  "question": "What is the due date for homework 2?",
  "course_id": "123",
  "include_hits": false
}
```

Headers:
```
Authorization: Bearer <forwarded-jwt>
```

Response:
```json
{
  "answer": "Homework 2 is due on December 15, 2024...",
  "model_used": "anthropic.claude-3-5-sonnet-20241022-v2:0"
}
```

### Java Backend â†’ Canvas LMS

| API Call | Purpose |
|----------|---------|
| `GET /api/v1/users/self/profile` | Get user profile |
| `GET /api/v1/users/self/enrollments` | Get course enrollments |
| `GET /api/v1/courses/{id}` | Get course details |
| `GET /api/v1/courses/{id}/users` | Get course students |
| `GET /api/v1/courses/{id}/assignments` | Get assignments |
| `GET /api/v1/courses/{id}/students/submissions` | Get grades |
| `GET /api/v1/courses/{id}/modules` | Get modules |
| `GET /api/v1/courses/{id}/pages/{url}` | Get page content |
| `GET /api/v1/courses/{id}/files/{id}` | Get file metadata |

### Java Backend â†’ AWS SNS

Events published for async processing:

```java
// Transcript uploaded â†’ Notes generation
publishTranscriptNotification(transcriptId);
// Publishes: {"type":"transcript","id":123}

// Syllabus synced â†’ Vectorization
publishSyllabusNotification(syllabusId);
// Publishes: {"type":"syllabus","id":456}

// Assignments synced â†’ Vectorization
publishAssignmentNotification(assignmentId);

// Modules synced â†’ Vectorization
publishModulesNotification(courseId, moduleIds);
// Publishes: {"type":"modules","courseId":1,"moduleIds":[1,2,3]}
```

## 3.3 Event/Message Flows

### Notes Generation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    POST /transcripts    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    SNS Event    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Java Backend â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   SNS   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                            â”‚                               â”‚
                                            â”‚ Save to DB                    â”‚ Fan-out
                                            â–¼                               â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  PostgreSQL  â”‚               â”‚     SQS       â”‚
                                    â”‚ (transcripts)â”‚               â”‚ (notes-queue) â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                           â”‚
                                                                           â–¼
                                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                  â”‚ Notes Generation â”‚
                                                                  â”‚     Worker       â”‚
                                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                           â”‚
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                     â”‚                                     â”‚
                                     â–¼                                     â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   Bedrock    â”‚                     â”‚  PostgreSQL  â”‚
                              â”‚  (Claude 3)  â”‚                     â”‚   (notes)    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                           â”‚
                                                                           â”‚ Publish
                                                                           â–¼
                                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                  â”‚  SNS (to vector  â”‚
                                                                  â”‚     worker)      â”‚
                                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### QA Question Flow

```
User asks question in Chat
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend: POST /api/qa/ask {question, courseId}                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Java Backend:                                                        â”‚
â”‚  1. Validate JWT token                                                â”‚
â”‚  2. Get course context                                                â”‚
â”‚  3. Forward to Flask QA service with JWT                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Flask QA Service:                                                    â”‚
â”‚  1. Validate JWT (shared secret)                                      â”‚
â”‚  2. Generate query embedding (Titan Embed)                            â”‚
â”‚  3. Search S3 Vectors (semantic search)                               â”‚
â”‚  4. Score and select context chunks                                   â”‚
â”‚  5. Check if tool needed (grade lookup, TA notification)              â”‚
â”‚  6. Generate answer (Claude/Llama)                                    â”‚
â”‚  7. Return {answer, model_used}                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend: Display formatted answer                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# ğŸ“Œ 4. Features Breakdown

## 4.1 User Authentication

**Description:** Secure login/logout with JWT tokens and session management

**Services:** Frontend, Java Backend

**Flow:**
1. User enters email/password
2. Backend validates credentials (fake auth for development)
3. Backend creates/finds user in database
4. Backend generates JWT access token (15 min) + refresh token (7 days)
5. Access token stored in memory, refresh token in HTTP-only cookie
6. On expiry, automatic refresh with token rotation

**APIs:**
- `POST /api/auth/login`
- `POST /api/auth/refresh`
- `POST /api/auth/logout`
- `GET /api/auth/me`

**DB Tables:** `students`, `instructors`, `user_sessions`, `external_mappings`

## 4.2 Course Registration

**Description:** Instructors register Canvas courses to the system

**Services:** Frontend, Java Backend, Canvas LMS

**Flow:**
1. Instructor views profile with Canvas enrollments
2. Selects courses to register
3. Backend creates course records
4. Backend syncs students from Canvas
5. Backend syncs syllabus, assignments, announcements
6. Backend publishes SNS events for vectorization

**APIs:**
- `GET /api/user/profile` (includes Canvas enrollments)
- `POST /api/courses/register`

**DB Tables:** `courses`, `enrollments`, `syllabus`, `assignments`, `announcements`

## 4.3 AI-Powered Question Answering

**Description:** Students ask questions, receive AI-generated answers from course materials

**Services:** Frontend, Java Backend, Flask QA Service, S3 Vectors, Bedrock

**Flow:**
1. Student types question in chat
2. Backend forwards to Flask QA
3. QA service embeds question
4. QA service searches S3 Vectors for relevant chunks
5. QA service generates answer with Claude
6. Answer displayed with markdown formatting

**APIs:**
- `POST /api/qa/ask`

**DB Tables:** `qa_logs`

**Business Logic:**
- Semantic search across notes, syllabus, assignments, announcements, modules
- Role-based tool access (students: grades, instructors: roster)
- Automatic TA notification on low confidence

## 4.4 Lecture Notes Generation

**Description:** Automatic generation of structured notes from lecture transcripts

**Services:** Java Backend, Notes Generation Worker, Bedrock

**Flow:**
1. Instructor uploads transcript text
2. Backend saves to database
3. Backend publishes SNS event
4. Lambda processes transcript with Claude 3
5. Lambda saves generated notes
6. Lambda triggers vectorization

**APIs:**
- `POST /api/transcripts`
- `GET /api/transcripts/course/{id}`
- `GET /api/notes/{id}`

**DB Tables:** `transcripts`, `notes`

## 4.5 Grade Viewing

**Description:** Students view their grades from Canvas

**Services:** Frontend, Java Backend, Canvas LMS, Flask QA Service

**Flow (via Chat):**
1. Student asks "What is my grade on homework 2?"
2. QA service detects grade intent
3. QA service calls grade tool
4. Tool fetches grades from Java backend
5. Java backend fetches from Canvas API
6. Formatted response returned to student

**Flow (via Grades page):**
1. Student navigates to Grades page
2. Frontend fetches grades from backend
3. Backend fetches from Canvas API
4. Grades displayed in table

**APIs:**
- `GET /api/courses/{id}/students/{studentId}/grades`

## 4.6 QA Analytics

**Description:** Instructors view question statistics and student engagement

**Services:** Frontend, Java Backend

**Flow:**
1. Instructor navigates to Analytics
2. Backend queries qa_logs for course
3. Returns daily counts, student breakdowns
4. Frontend displays charts (Recharts)

**APIs:**
- `GET /api/analytics/qa`
- `GET /api/analytics/qa/student/{studentId}`

**DB Tables:** `qa_logs`

## 4.7 Dispute Resolution

**Description:** Students dispute AI answers, instructors provide corrections

**Services:** Frontend, Java Backend, Email Service

**Flow (Student):**
1. Student marks answer as wrong
2. Student submits dispute with expected answer
3. Backend saves dispute
4. TA notified via email

**Flow (Instructor):**
1. Instructor views disputes
2. Instructor provides solution
3. Backend saves resolution
4. Student notified via email

**APIs:**
- `POST /api/qa/dispute`
- `GET /api/disputes`
- `POST /api/disputes/resolve`

**DB Tables:** `qa_disputes`, `qa_logs`

---

# ğŸ“Œ 5. Security Model

## 5.1 Authentication

### Mechanism: JWT (JSON Web Tokens)

**Implementation:**
- Algorithm: **HMAC-SHA256** (HS256)
- Library: `io.jsonwebtoken:jjwt` (Java), `PyJWT` (Python)
- Secret: Shared via `JWT_SECRET` environment variable

**Token Structure:**
```json
{
  "sub": "instructor-1",           // User ID
  "userType": "instructor",        // Role
  "entityId": 1,                   // DB entity ID
  "email": "instructor@vt.edu",
  "name": "John Doe",
  "iss": "vt-ai-lecture-assistant",
  "aud": "vt-ai-frontend",
  "iat": 1733500000,
  "exp": 1733500900                // 15 min for access token
}
```

**Token Types:**
| Type | Expiry | Storage | Purpose |
|------|--------|---------|---------|
| Access Token | 15 minutes | In-memory (JS) | API authentication |
| Refresh Token | 7 days | HTTP-only cookie | Token renewal |

### Token Verification Process

**Java Backend (`JwtAuthenticationFilter`):**
1. Extract token from `Authorization: Bearer <token>` header
2. Validate signature with shared secret
3. Verify issuer = "vt-ai-lecture-assistant"
4. Verify audience = "vt-ai-frontend"
5. Check expiration
6. Extract payload, create Spring Security authentication

**Flask QA Service (`auth.py`):**
1. Require `@require_auth` decorator
2. Decode token with shared secret
3. Extract user context (role, entity_id, course_id)
4. Store in Flask's `g` for request duration

### Session Management

- Sessions stored in `user_sessions` table
- Refresh token **hashed** with BCrypt before storage
- Token rotation on each refresh (old token invalidated)
- Automatic cleanup of expired sessions (scheduled task)

## 5.2 Authorization

### Role-Based Access Control (RBAC)

**Roles:**
| Role | Access Level |
|------|--------------|
| `student` | View own grades, ask questions, view transcripts, submit disputes |
| `instructor` | All student access + course management, analytics, dispute resolution |

**Spring Security Annotations:**
```java
@PreAuthorize("isAuthenticated()")           // Any logged-in user
@PreAuthorize("hasRole('INSTRUCTOR')")       // Instructors only
```

**Frontend Route Guards:**
```tsx
<ProtectedRoute allow={["instructor"]}>
  <Analytics />
</ProtectedRoute>
```

**Tool-Level Authorization (Flask):**
```python
# Grade tool - students only
if context.role == "student":
    tools.append(GRADE_TOOL_SCHEMA)

# Roster tool - instructors only
if context.role == "instructor":
    tools.append(ROSTER_TOOL_SCHEMA)
```

### Endpoint Authorization Matrix

| Endpoint | Student | Instructor |
|----------|---------|------------|
| `POST /api/qa/ask` | âœ“ | âœ“ |
| `GET /api/courses/{id}/grades` | Own only | Any student |
| `GET /api/analytics/qa` | âœ— | âœ“ |
| `POST /api/disputes/resolve` | âœ— | âœ“ |
| `POST /api/courses/register` | âœ— | âœ“ |

## 5.3 Additional Security Measures

### Input Validation

- **Java:** Spring Validation (`@Valid`, `@NotBlank`, `@Min`)
- **Python:** Pydantic models with type validation
- **Frontend:** TypeScript types, form validation

### Credential & Secret Handling

| Secret | Storage | Access |
|--------|---------|--------|
| JWT Secret | Environment variable | Backend only |
| Canvas Tokens | Environment variable | Backend only |
| AWS Credentials | Environment variable | Backend + Lambda |
| SMTP Password | Environment variable | Backend only |
| Database Password | Environment variable | Backend + Lambda |
| Refresh Tokens | Database (hashed) | Backend only |

### Password Hashing

- **Refresh tokens:** BCrypt hashing before storage
- **User passwords:** Not stored (Canvas OAuth or fake auth)

### Security Headers

- CORS configuration with allowed origins
- HTTP-only cookies for refresh tokens
- Secure cookie flag (recommended for production)

### Common Security Pitfalls Detected

| Issue | Status | Recommendation |
|-------|--------|----------------|
| Debug mode in production | âš ï¸ | Disable `spring.jpa.show-sql` in prod |
| Hardcoded fake credentials | âš ï¸ | Use Canvas OAuth in production |
| JWT secret in config file | âš ï¸ | Use secure secret management (AWS Secrets Manager) |
| CORS origin "*" | âš ï¸ | Restrict to specific domains in prod |

---

# ğŸ“Œ 6. System Architecture

## 6.1 High-Level Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    USERS                                         â”‚
â”‚                     Students & Instructors (Virginia Tech)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚ HTTPS
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              PRESENTATION LAYER                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    React SPA (vt-ai-lecture-assistant)                       â”‚  â”‚
â”‚  â”‚  â€¢ React 18 + TypeScript      â€¢ Tailwind CSS                                 â”‚  â”‚
â”‚  â”‚  â€¢ React Router 6             â€¢ Recharts (Analytics)                         â”‚  â”‚
â”‚  â”‚  â€¢ Inversify DI               â€¢ Axios HTTP Client                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚ REST API (Port 3167)
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              APPLICATION LAYER                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                Spring Boot Backend (API Gateway)                             â”‚  â”‚
â”‚  â”‚  â€¢ Spring Security + JWT Authentication                                      â”‚  â”‚
â”‚  â”‚  â€¢ Spring Data JPA (Hibernate)                                               â”‚  â”‚
â”‚  â”‚  â€¢ Canvas LMS API Integration (REST Template)                                â”‚  â”‚
â”‚  â”‚  â€¢ AWS SNS Client (Event Publishing)                                         â”‚  â”‚
â”‚  â”‚  â€¢ In-Memory Caching (ConcurrentMapCacheManager)                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                        â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                     â”‚                                          â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚                    Flask QA Service (AI Layer)                           â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Semantic Search (S3 Vectors)                                          â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ LLM Integration (Bedrock Claude/Llama)                                â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Tool Calling (Grades, TA Notification)                                â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                         â”‚                         â”‚
              â–¼                         â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DATA LAYER        â”‚   â”‚   MESSAGING LAYER   â”‚   â”‚   EXTERNAL SERVICES         â”‚
â”‚                     â”‚   â”‚                     â”‚   â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL   â”‚  â”‚   â”‚  â”‚   AWS SNS     â”‚  â”‚   â”‚  â”‚    Canvas LMS API     â”‚  â”‚
â”‚  â”‚  (AWS RDS)    â”‚  â”‚   â”‚  â”‚  (FIFO Topic) â”‚  â”‚   â”‚  â”‚   (canvas.vt.edu)     â”‚  â”‚
â”‚  â”‚  â€¢ 18 Tables  â”‚  â”‚   â”‚  â”‚               â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚  â€¢ US-East-2  â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚          â”‚          â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                     â”‚   â”‚          â–¼          â”‚   â”‚  â”‚   Gmail SMTP Server   â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”‚  (Email Notifications)â”‚  â”‚
â”‚  â”‚  S3 Vectors   â”‚  â”‚   â”‚  â”‚   AWS SQS     â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚  (US-East-2)  â”‚  â”‚   â”‚  â”‚  (Queues)     â”‚  â”‚   â”‚                             â”‚
â”‚  â”‚  â€¢ Embeddings â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ Per-Course â”‚  â”‚   â”‚          â”‚          â”‚   â”‚  â”‚   AWS Bedrock         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚          â–¼          â”‚   â”‚  â”‚  (Claude, Titan)      â”‚  â”‚
â”‚                     â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚ Lambda Workersâ”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚  â”‚ â€¢ Notes Gen   â”‚  â”‚
                          â”‚  â”‚ â€¢ Vectorize   â”‚  â”‚
                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6.2 Data Flow Architecture

### Write Path (Content Ingestion)

```
Canvas LMS â”€â”€â–º Java Backend â”€â”€â–º PostgreSQL
                    â”‚
                    â”œâ”€â”€â–º SNS (Vectorization Topic)
                    â”‚           â”‚
                    â”‚           â–¼
                    â”‚      Lambda (Vectorization)
                    â”‚           â”‚
                    â”‚           â–¼
                    â”‚      S3 Vectors
                    â”‚
                    â””â”€â”€â–º SNS (Notes Topic)
                                â”‚
                                â–¼
                           Lambda (Notes Generation)
                                â”‚
                                â”œâ”€â”€â–º PostgreSQL (notes)
                                â”‚
                                â””â”€â”€â–º SNS (Vectorization) â”€â”€â–º S3 Vectors
```

### Read Path (QA Query)

```
User Question â”€â”€â–º Frontend â”€â”€â–º Java Backend â”€â”€â–º Flask QA
                                                    â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚                               â”‚
                                    â–¼                               â–¼
                              Bedrock (Embed)                  S3 Vectors
                                    â”‚                          (Search)
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â–¼
                                              Bedrock (LLM)
                                                    â”‚
                                                    â–¼
                                              Answer â”€â”€â–º User
```

## 6.3 Domain Boundaries

| Domain | Service | Responsibility |
|--------|---------|----------------|
| **User Management** | Java Backend | Authentication, sessions, profiles |
| **Course Management** | Java Backend | Registration, enrollment, context |
| **Content Ingestion** | Java Backend + Workers | Transcripts, Canvas sync, vectorization |
| **QA Intelligence** | Flask QA Service | Semantic search, LLM answering |
| **Analytics** | Java Backend | QA logs, usage statistics |
| **Notifications** | Java Backend + Flask | Email (disputes, TA alerts) |

## 6.4 Networking

- **Frontend:** Served as static files (localhost:3000 in dev)
- **Java Backend:** Port 3167
- **Flask QA Service:** Port 5000
- **Canvas LMS:** External HTTPS (canvas.vt.edu)
- **AWS Services:** SDK over HTTPS

## 6.5 Storage Layers

| Layer | Technology | Purpose |
|-------|------------|---------|
| **Primary DB** | PostgreSQL (AWS RDS) | Transactional data |
| **Vector Store** | AWS S3 Vectors | Semantic search embeddings |
| **Cache** | ConcurrentMapCacheManager | Canvas API response caching |
| **Session** | PostgreSQL | JWT session persistence |

## 6.6 Caching

**Canvas API Caching:**
- Cache names: `canvas-users`, `canvas-enrollments`, `canvas-courses`, `canvas-students`
- Cache strategy: Cache unless result is null
- Eviction: Manual via Admin API

## 6.7 Message Queues / Async Jobs

**SNS Topics:**
- Notes generation topic (transcript â†’ notes)
- Vectorization topic (FIFO, content â†’ embeddings)

**Scheduled Tasks:**
- Session cleanup: Daily at 2 AM
- QA logs cleanup: Configurable retention (default 90 days)

## 6.8 Observability

### Logging

| Service | Framework | Levels |
|---------|-----------|--------|
| Java Backend | SLF4J + Logback | DEBUG (dev), INFO (prod) |
| Flask QA | Python logging + Structlog | INFO |
| Lambda Workers | CloudWatch Logs | INFO |

### Metrics

- Not explicitly configured
- Lambda has built-in CloudWatch metrics
- Could add Prometheus/Grafana

## 6.9 Deployment

### Current Setup (Development)

- **Frontend:** Local dev server (npm start)
- **Java Backend:** Local Spring Boot (mvn spring-boot:run)
- **Flask QA:** Local Gunicorn/Flask dev
- **Lambda:** AWS Console deployment

### Production Considerations

| Component | Recommended Deployment |
|-----------|------------------------|
| Frontend | AWS CloudFront + S3 |
| Java Backend | AWS ECS/EKS or EC2 |
| Flask QA | AWS Lambda + API Gateway or ECS |
| Database | AWS RDS (PostgreSQL) - already in place |
| Workers | AWS Lambda - already in place |

### Serverless Infrastructure

```yaml
# template.yaml (SAM)
Resources:
  VectorizationWorker:
    Type: AWS::Serverless::Function
    Properties:
      Handler: lambda_function.lambda_handler
      Runtime: python3.10
      MemorySize: 512
      Timeout: 300
      Environment:
        Variables:
          DATABASE_URL: !Ref DatabaseUrl
          S3_VECTOR_STORE_BUCKET_ARN: !Ref VectorBucket
```

## 6.10 Scaling Considerations

### Horizontal Scaling

| Component | Strategy |
|-----------|----------|
| Frontend | CDN distribution |
| Java Backend | Load balancer + multiple instances |
| Flask QA | Auto-scaling group or Lambda |
| Workers | Lambda auto-scales |
| Database | Read replicas for read-heavy |
| S3 Vectors | Managed, auto-scales |

### Vertical Scaling

- Lambda memory: 512MB-1024MB recommended
- RDS instance size based on query volume

---

# ğŸ“Œ 7. Project History & Metrics

## 7.1 Code Metrics

### Total Lines of Code (Approximate)

| Service | Language | Lines (approx) | Files |
|---------|----------|----------------|-------|
| Java Backend | Java | ~8,500 | 88 |
| Frontend | TypeScript/TSX | ~4,500 | 34 |
| Flask QA Service | Python | ~2,000 | 11 |
| Vectorization Worker | Python | ~1,870 | 2 (main files) |
| Notes Generation Worker | JavaScript | ~350 | 6 |
| **TOTAL** | Mixed | **~17,220** | ~141 |

### Lines by Language

| Language | Estimated Lines |
|----------|-----------------|
| Java | ~8,500 |
| TypeScript/TSX | ~4,500 |
| Python | ~3,870 |
| JavaScript | ~350 |

### File Counts

| Service | Files |
|---------|-------|
| Java Backend | 88 .java files |
| Frontend | 34 .ts/.tsx files |
| Flask QA | 11 .py files |
| Vectorization Worker | 2 main files |
| Notes Worker | 6 .js files |

### Complexity Hotspots

| File | Lines | Observation |
|------|-------|-------------|
| `ClientController.java` | ~1,500 | Largest file, many endpoints, consider splitting |
| `lambda_function.py` | 1,763 | Large Lambda, handles multiple event types |
| `services.py` (QA) | ~1,050 | Core QA logic, complex but well-structured |
| `Chat.tsx` | 343 | Largest React component |

## 7.2 Git / Commit Metrics

### Commits in Last 3 Months

Based on git log for Java Backend:
- **Total Commits:** ~21 commits
- **Contributors:** 1-2 (based on single-author pattern)

### Commit Activity (Java Backend)

| Month | Approximate Commits | Key Features |
|-------|---------------------|--------------|
| Oct 2024 | ~5 | Initial setup, login flow, course registration |
| Nov 2024 | ~10 | Notes generation, SNS integration, Canvas sync |
| Dec 2024 | ~6 | Disputes, analytics, module content |

### Recent Commits (Java Backend)

```
bae26e5 feat(backend): add QA dispute system and logging improvements
f53d68d Add module sync functionality during course registration
a97fc6e Add module content extraction APIs for Canvas integration
abb7ab7 Restrict course students endpoint to instructors only
53af9b7 Added auth token for external QA service
fb512ba Added fetch grades API
638f467 Added support for announcements
ea50f9b Fetching announcements from canvas
45baf12 Added support for fetching assignments while registering course
fff35fd Added Notification for save syllabus
b249811 Made changes in note entity
653c187 Refactored code
c93035c Chat QA feature added
b19f69c handled Student login flow
928c71e Added SNS Notif for notes generation
e4a586c Adding updates doc
fff8743 Implement automatic session cleanup and Canvas API caching
8d1eca1 Implement secure token hashing and rotation
7344d1a Added logging for Canvas API calls
a49ad60 Functionality working CRUD
c3c734f Login working fine/working on course registration
```

### Most Modified Areas

| Area | Changes | Purpose |
|------|---------|---------|
| `controller/` | High | New endpoints, API evolution |
| `service/` | High | Business logic additions |
| `entity/` | Medium | New entities (disputes, announcements) |
| `dto/` | Medium | New request/response types |

## 7.3 Dependency Metrics

### Java Backend (Maven)

| Category | Count | Notable |
|----------|-------|---------|
| Spring Starters | 5 | Web, JPA, Security, Validation, Mail |
| AWS SDK | 1 | SNS |
| JWT | 3 | jjwt-api, impl, jackson |
| Database | 1 | PostgreSQL |
| Utilities | 2 | Lombok, Commons Lang3 |

### Frontend (npm)

| Category | Count | Notable |
|----------|-------|---------|
| React Core | 3 | React, DOM, Scripts |
| Routing | 1 | react-router-dom |
| HTTP | 1 | axios |
| Styling | 3 | Tailwind, PostCSS, Autoprefixer |
| Icons | 2 | Heroicons, Lucide |
| DI | 2 | Inversify, reflect-metadata |
| Charts | 1 | Recharts |

### Flask QA Service (pip)

| Category | Count | Notable |
|----------|-------|---------|
| Web | 2 | Flask, Flask-CORS |
| AWS | 2 | boto3, botocore |
| Validation | 1 | Pydantic |
| Auth | 1 | PyJWT |
| HTTP | 1 | requests |

### Outdated/Deprecated Dependencies

| Dependency | Status | Action |
|------------|--------|--------|
| typescript 4.9.5 | Outdated (5.x available) | Consider upgrade |
| react-scripts 5.0.1 | Current | OK |
| Flask 3.0.0 | Current | OK |
| Spring Boot 3.2.0 | Current | OK |

## 7.4 Architecture Quality Metrics

### Coupling Analysis

| Concern | Observation |
|---------|-------------|
| Service Dependencies | Moderate coupling - services have clear responsibilities |
| Cross-Service Communication | Well-defined (HTTP, SNS/SQS) |
| Database Access | Centralized through JPA repositories |
| External APIs | Abstracted through service layer |

### Code Duplication

| Area | Observation |
|------|-------------|
| Canvas API calls | Well-abstracted in CanvasService |
| Error handling | Standardized with ApiResponse wrapper |
| JWT validation | Shared secret, similar logic in Java/Python |

### Folder Hierarchy Quality

| Service | Quality | Notes |
|---------|---------|-------|
| Java Backend | âœ“ Good | Clear MVC separation |
| Frontend | âœ“ Good | Feature-based organization |
| Flask QA | âœ“ Good | Modular tool system |
| Workers | âœ“ Good | Simple, focused structure |

### Maintainability Observations

- **Positive:** Clear separation of concerns, well-documented APIs
- **Concern:** Large controller file could be split by domain
- **Concern:** Some debug logging left in code (marked TODO)

---

# ğŸ“Œ 8. Bottlenecks, Risks & Improvements

## 8.1 Potential Performance Bottlenecks

| Bottleneck | Impact | Recommendation |
|------------|--------|----------------|
| Large Canvas API responses | Slow profile loading | Implement pagination, background sync |
| Embedding generation | Slow vectorization | Batch embeddings, parallel processing |
| S3 Vectors query | QA latency | Tune TOP_K, add caching layer |
| Single Lambda function | Cold starts | Provisioned concurrency |
| Database connection pooling | Lambda connection exhaustion | Use RDS Proxy |

## 8.2 Architectural Risks

| Risk | Severity | Mitigation |
|------|----------|------------|
| Single point of failure (Java Backend) | High | Deploy multiple instances, health checks |
| JWT secret exposure | High | Use AWS Secrets Manager |
| Canvas API rate limits | Medium | Implement backoff, caching |
| Lambda cold starts | Medium | Provisioned concurrency |
| No database backups (visible) | High | Enable RDS automated backups |

## 8.3 Security Issues

| Issue | Severity | Status |
|-------|----------|--------|
| Fake auth in production | Critical | Replace with Canvas OAuth |
| JWT secret in config | High | Move to secure secret management |
| Debug logging of tokens | Medium | Remove before production |
| CORS wildcard | Medium | Restrict to known origins |
| No HTTPS enforcement | Medium | Enable in production |

## 8.4 Refactoring Opportunities

| Area | Improvement |
|------|-------------|
| `ClientController.java` | Split into domain-specific controllers |
| Canvas API caching | Use Redis for distributed caching |
| Lambda workers | Consider containerized deployment for consistency |
| Error handling | Implement circuit breaker pattern |
| Logging | Centralize with ELK or CloudWatch Insights |

## 8.5 Scaling Concerns

| Concern | Current State | Recommendation |
|---------|---------------|----------------|
| User growth | Single backend instance | Auto-scaling group |
| QA volume | Flask single instance | Lambda or ECS with auto-scaling |
| Vector storage | Per-course indices | Monitor index size, consider partitioning |
| Database | Single RDS | Read replicas for analytics queries |

## 8.6 Developer Experience (DX) Improvements

| Area | Improvement |
|------|-------------|
| Local development | Add Docker Compose for all services |
| Environment setup | Document required env vars more clearly |
| Testing | Add unit and integration tests |
| CI/CD | Implement GitHub Actions or AWS CodePipeline |
| API documentation | Generate OpenAPI/Swagger docs |

## 8.7 Documentation Improvements

| Area | Status | Recommendation |
|------|--------|----------------|
| API documentation | Partial (Javadoc) | Add Swagger/OpenAPI |
| Architecture diagrams | Missing | Add C4 or draw.io diagrams |
| Deployment guide | Missing | Document production deployment |
| Runbooks | Missing | Add operational runbooks |

---

# ğŸ“Œ 9. Glossary

## Internal Terminology

| Term | Definition |
|------|------------|
| **Course Context** | The currently active/selected course for a user session |
| **Entity ID** | Database primary key for Student or Instructor |
| **External Mapping** | Link between internal IDs and Canvas IDs |
| **QA Log** | Record of a question-answer interaction |
| **QA Dispute** | Student complaint about an AI-generated answer |
| **Vectorization** | Process of converting text to vector embeddings |
| **Tool Calling** | LLM capability to execute functions (grades, TA notification) |

## Acronyms

| Acronym | Full Form |
|---------|-----------|
| **VT** | Virginia Tech |
| **LMS** | Learning Management System |
| **QA** | Question & Answer |
| **JWT** | JSON Web Token |
| **SNS** | Simple Notification Service (AWS) |
| **SQS** | Simple Queue Service (AWS) |
| **RDS** | Relational Database Service (AWS) |
| **FIFO** | First-In-First-Out (queue type) |
| **SPA** | Single Page Application |
| **DTO** | Data Transfer Object |
| **JPA** | Java Persistence API |
| **CORS** | Cross-Origin Resource Sharing |
| **DI** | Dependency Injection |

## Service Names

| Service | Description |
|---------|-------------|
| **VT-AI-Lecture-Assistant-Backend_Java** | Main API gateway (Spring Boot) |
| **VT-AI-Lecture-Assistant-Frontend** | React user interface |
| **flask-qa-service** | AI-powered QA service (Python) |
| **vectorization-worker-dev-py** | Lambda for content vectorization |
| **notes-generation-worker** | Lambda for notes generation |

## Domain Concepts

| Concept | Definition |
|---------|------------|
| **Instructor** | Course teacher/professor who manages course content |
| **Student** | Learner enrolled in courses |
| **Transcript** | Raw text of a lecture (uploaded by instructor) |
| **Note** | AI-generated structured notes from transcript |
| **Syllabus** | Course syllabus content from Canvas |
| **Module** | Canvas course module containing items |
| **Chunk** | Text segment for vector embedding (300 words typical) |
| **Embedding** | Vector representation of text (1024-dimensional) |
| **Semantic Search** | Finding relevant content by meaning (not keywords) |

---

# Appendix: Quick Reference

## Service URLs (Development)

| Service | URL |
|---------|-----|
| Frontend | http://localhost:3000 |
| Java Backend | http://localhost:3167 |
| Flask QA | http://localhost:5000 |

## Key Configuration Files

| Service | File | Purpose |
|---------|------|---------|
| Java Backend | `application.properties` | All configuration |
| Frontend | `.env` | API URL, timeout |
| Flask QA | `config.py` | AWS, model, feature flags |
| Vectorization | Environment vars | Lambda configuration |

## Health Check Endpoints

| Service | Endpoint | Expected Response |
|---------|----------|-------------------|
| Java Backend | `GET /api/health` | `{"status": "healthy"}` |
| Flask QA | `GET /health` | `{"status": "healthy", "service": "qa-service"}` |

---

*This documentation was generated by analyzing the complete codebase. All information is derived from actual source code, configuration files, and project structure.*

